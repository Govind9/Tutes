General Setup:
    
    1. Make sure you have the latest available OS version running on pi:
        sudo apt-get update
        sudo apt-get dist-upgrade
        sudo apt-get upgrade
    
    2. Install necessary bluetooth packages:
        sudo apt-get install pi-bluetooth
        sudo apt-get install bluetooth
        sudo apt-get install bluez
        sudo apt-get install blueman
        sudo apt-get install bluez-tools
        sudo apt-get install bluez-utils
    Many of these may already be installed on your system but it doesn't hurt to be sure, so run the above commands anyway.
    
    3. Reboot your system:
        sudo reboot
        
    4. Start Bluetooth service if it is not started:
        sudo /etc/init.d/bluetooth start
        
    5. Check to see if your bluetooth is working:
    List the adapter:
        hciconfig
    Power up the adapter if it is down
        sudo hciconfig hci0 up
    You can find more information about your adapter using:
        hciconfig -a hci0
    Scan nearby devices:
        hcitool scan
    It helps to copy the Mac address of the device you wish to interact with.

Sending Files from pi to phone:
   
    1. Make your phone a ftp server,
        Install the following app from playstore:
        "Astro Bluetooth Module" By Metago
        After the app install, open it and tick on the following three if ther are disabled:
            Bluetooth
            Discoverable
            OBEX FTP Server
    
    2. Make your pi FTP capable:
        sudo apt-get update
        sudo apt-get install obexftp
    
    3. Pair to phone from pi:
        bluetoothctl
    In the interactive shell, type in the following commands":
        power on
        agent on
        default-agent
        scan on
    Select (copy) the Mac address of the phone you want to send files to.
        pair <MAC address>
        trust <MAC address>
    Open up another terminal and send the file using the following command:
        obexftp -b <MAC> -p /Path/To/File
        

Sending files from a phone to raspberry pi:
    
    1. Service discovery:
    List out the service offered by pi:
        sudo sdptool browse local | grep "Service Name"
    This will list out the names of the services currently offered by pi. In order to receive files Object Push Profile service is needed. If it is listed then all is set, otherwise you need to install it either following this tutorial (for a detailed installation): 
        http://www.instructables.com/id/Make-Raspberry-Pi-device-become-a-Bluetooth-Object/step0/Make-Raspberry-Pi-device-become-a-Bluetooth-Object/ 
    OR simply follow these instructions:
        sudo apt-get install obexpushd
    Check if the obex-data process is already running:
        ps auwx | grep obex-da
        kill -9 XXXX
    Where XXXX is the process id of obex-data process if it at all running.
    Start the installed obexpushd service:
        sudo obexpushd -B -n
    It should have the following output:
        This software comes with ABSOLUTELY NO WARRANTY.
        This is free software, and you are welcome to redistribute it
        under certain conditions.
        Listening on bluetooth/[00:00:00:00:00:00]:9
        
    2. Pairing and connecting to phone:
    Fire up another terminal window and start the bluetooth CLI:
        bluetoothctl
    This will start an interactive session using which we can do a variety of things including connecting to devices etc. To check the available command type help.
    To get a better understanding of how to use this CLI, go to the following link:
        https://wiki.archlinux.org/index.php/Bluetooth#Bluetoothctl
    Or simple type in the following commands:
        power on
        scan on
        agent on
        devices
        pair <Mac address of the phoen, copied during hcitool scan>
        trust <Mac address of the phone>
        connect <Mac address of the phone>
    
    3. Send files from the phone.
    Once the pairing is done and the connection is established, you can use your phone to select any file and send it pi.
    At the terminal where obexpushd is running you should be able to see a new file being created as the phone is sending it.
    
    4. Close obexpushd:
        ctrl + c
        
    5. Close bluetoothctl:
        quit
       
    6. Close adapter:
        sudo hciconfig hci0 down
